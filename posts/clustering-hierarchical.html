<html>
  <head>
    <meta charSet="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>
      Clustering with FSharp.Stats II: hierarchical clustering
    </title>
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans"/>
    <script defer="true" src="https://kit.fontawesome.com/0d3e0ea7a6.js" crossOrigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fslab/fslab-styles"/>
    <meta name="description" content="his tutorial demonstrates hierarchical clustering with FSharp.Stats and how to visualize the results with Plotly.NET."/>
    <meta name="tags" content="fslab, FsLab, data science, datascience, data visualization, dataviz, F#, C#, .NET, dotnet"/>
    <meta name="og:title" content="Clustering with FSharp.Stats II: hierarchical clustering"/>
    <meta name="og:description" content="his tutorial demonstrates hierarchical clustering with FSharp.Stats and how to visualize the results with Plotly.NET."/>
    <meta name="og:image" content="https://fslab.org/blog/images/hClust.png"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@fslaborg"/>
    <meta name="twitter:title" content="Clustering with FSharp.Stats II: hierarchical clustering"/>
    <meta name="twitter:description" content="his tutorial demonstrates hierarchical clustering with FSharp.Stats and how to visualize the results with Plotly.NET."/>
    <meta name="twitter:image" content="https://fslab.org/blog/images/hClust.png"/>
    <script src="https://fslab.org/blog/js/navbar.js"></script>
    <script src="https://fslab.org/blog/js/prism.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-timeline@3.0.5/dist/css/bulma-timeline.min.css"/>
    <script>
      MathJax = {tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]}}
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-svg.js"></script>
    <link rel="stylesheet" href="https://fslab.org/blog/style/notebook.css"/>
    <link rel="stylesheet" href="https://fslab.org/blog/style/custom.css"/>
  </head>
  <body>
    <div class="columns is-fullheight m-0">
      <div class="column is-2 is-paddingless box m-0">
        <aside class="menu p-4" id="graph-menu">
          <div class="content">
            <h3 class="title is-capitalized is-inline-block is-emphasized-darkmagenta mb-4">
              Table of contents
            </h3>
            <ul>
              <li>
                <a href="#Clustering-with-FSharp.Stats-II:-hierarchical-clustering" class="is-aquamarine">
                  Clustering with FSharp.Stats II: hierarchical clustering
                </a>
              </li>
              <li>
                <a href="#Introduction" class="is-aquamarine">
                  Introduction
                </a>
              </li>
              <li>
                <a href="#There-are-two-types-of-hClust:" class="is-aquamarine">
                  There are two types of hClust:
                </a>
              </li>
              <li>
                <a href="#Distance-measures" class="is-aquamarine">
                  Distance measures
                </a>
              </li>
              <li>
                <a href="#Linker" class="is-aquamarine">
                  Linker
                </a>
              </li>
              <li>
                <a href="#Referencing-packages" class="is-aquamarine">
                  Referencing packages
                </a>
              </li>
              <li>
                <a href="#Loading-data" class="is-aquamarine">
                  Loading data
                </a>
              </li>
              <li>
                <a href="#Clustering" class="is-aquamarine">
                  Clustering
                </a>
              </li>
              <li>
                <a href="#Limitations" class="is-aquamarine">
                  Limitations
                </a>
              </li>
              <li>
                <a href="#Notes" class="is-aquamarine">
                  Notes
                </a>
              </li>
              <li>
                <a href="#References" class="is-aquamarine">
                  References
                </a>
              </li>
              <li>
                <a href="#Further-reading" class="is-aquamarine">
                  Further reading
                </a>
              </li>
            </ul>
          </div>
        </aside>
      </div>
      <div class="column is-10 is-paddingless pl-1 pr-6">
        <nav class="navbar">
          <div class="navbar-brand">
            <a class="navbar-item" href="https://fslab.org">
              <img src="https://fslab.org/blog/images/favicon.png" alt="Logo"/>
            </a>
            <a class="navbar-burger" data-target="navMenu" aria-label="menu" role="button" aria-expanded="false">
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
            </a>
          </div>
          <div id="navMenu" class="navbar-menu">
            <div class="navbar-start">
              <a class="navbar-item" href="https://fslab.org">
                Home
              </a>
              <a class="navbar-item" href="https://fslab.org/packages.html">
                Data science packages
              </a>
              <a class="navbar-item is-active-link-darkmagenta smooth-hover" href="https://fslab.org/blog/">
                Blog
              </a>
              <a class="navbar-item" href="https://fslab.org/blog/graph-gallery.html">
                Graph Gallery
              </a>
            </div>
            <div class="navbar-end">
              <a class="navbar-item is-magenta" href="https://twitter.com/fslaborg">
                <span class="icon">
                  <i class="fab fa-twitter"></i>
                </span>
              </a>
              <a class="navbar-item is-magenta" href="https://github.com/fslaborg">
                <span class="icon">
                  <i class="fab fa-github"></i>
                </span>
              </a>
            </div>
          </div>
        </nav>
        <section class="hero is-small has-bg-darkmagenta">
          <div class="hero-body">
            <div class="container has-text-justified">
              <div class="main-TextField">
                <h1 class="title is-capitalized is-white is-inline-block is-emphasized-magenta mb-4">
                  Clustering with FSharp.Stats II: hierarchical clustering
                </h1>
                <div class="block">
                  <h3 class="subtitle is-white is-block">
                    Posted on 2021-7-28 by
                    <a href="https://github.com/bvenn" class="is-aquamarine">
                      Benedikt Venn
                    </a>
                     in 
                    <a href="https://fslab.org/blog/posts/categories/Datascience.html" class="is-aquamarine">
                      Data Science
                    </a>
                  </h3>
                </div>
              </div>
            </div>
          </div>
        </section>
        <div class="content jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light">
          
<main>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h1 id="Clustering-with-FSharp.Stats-II:-hierarchical-clustering">Clustering with FSharp.Stats II: hierarchical clustering<a class="anchor-link" href="#Clustering-with-FSharp.Stats-II:-hierarchical-clustering">¶</a></h1><p><em>Summary:</em> This tutorial demonstrates hierarchical clustering with FSharp.Stats and how to visualize the results with Plotly.NET.</p>
<p>In the previous article of this series <a href="002_clustering_kMeans.html">k-means clustering using FSharp.Stats</a> was introduced.</p>
<h2 id="Introduction">Introduction<a class="anchor-link" href="#Introduction">¶</a></h2><p>Clustering methods can be used to group elements of a huge data set based on their similarity. Elements sharing similar properties cluster together and can be reported as coherent group.
Many clustering algorithms require a predefined cluster number, that has to be provided by the experimenter.
Hierarchical clustering (hClust) does not require such cluster number definition. Instead, hierarchical clustering results in a tree structure, that has a single cluster (node) on its root and recursively splits up into clusters of
elements that are more similar to each other than to elements of other clusters. For generating multiple clustering results with different number of clusters,
the clustering has to performed only once. Subsequently a cluster number can be defined to split up the clustering tree in the desired number of clusters.
The clustering tree is often represented as dendrogram.</p>
<h3 id="There-are-two-types-of-hClust:">There are two types of hClust:<a class="anchor-link" href="#There-are-two-types-of-hClust:">¶</a></h3><ul>
<li><p>Agglomerative (bottom-up): Each data point is in its own cluster and the nearest ones are merged recursively. It is referred as agglomerative hierarchical clustering.</p>
</li>
<li><p>Divisive (top-down): All data points are in the same cluster and you divide the cluster into two that are far away from each other.</p>
</li>
<li><p>The presented implementation is an agglomerative type.</p>
</li>
</ul>
<h3 id="Distance-measures">Distance measures<a class="anchor-link" href="#Distance-measures">¶</a></h3><p>There are several distance metrics, that can be used as distance function. The commonly used one probably is Euclidean distance.</p>
<h3 id="Linker">Linker<a class="anchor-link" href="#Linker">¶</a></h3><p>When the distance between two clusters is calculated, there are several linkage types to choose from:</p>
<ul>
<li><p><strong>complete linkage</strong>: maximal pairwise distance between the clusters (prone to break large clusters)</p>
</li>
<li><p><strong>single linkage</strong>: minimal pairwise distance between the clusters (sensitive to outliers)</p>
</li>
<li><p><strong>centroid linkage</strong>: distance between the two cluster centroids</p>
</li>
<li><p><strong>average linkage</strong>: average pairwise distance between the clusters (sensitive to cluster shape and size)</p>
</li>
<li><p><strong>median linkage</strong>: median pairwise distance between the clusters</p>
</li>
</ul>
<p><img alt="No description has been provided for this image" src="https://fslab.org/blog/images/hClust.png" style="max-width:100%"/></p>
<br/>
<p>For demonstration of hierarchical clustering, the classic iris data set is used, which consists of 150 records, each of which contains four measurements and a species identifier.</p>
<h2 id="Referencing-packages">Referencing packages<a class="anchor-link" href="#Referencing-packages">¶</a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [2]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-F#"><pre><span></span><span class="o">#</span><span class="n">r</span><span class="w"> </span><span class="s">"nuget: Deedle.Interactive, 3.0.0"</span>
<span class="o">#</span><span class="n">r</span><span class="w"> </span><span class="s">"nuget: FSharp.Stats, 0.4.3"</span>
<span class="o">#</span><span class="n">r</span><span class="w"> </span><span class="s">"nuget: Plotly.NET.Interactive, 4.0.0"</span>
<span class="o">#</span><span class="n">r</span><span class="w"> </span><span class="s">"nuget: FSharp.Data, 4.2.7"</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div><div></div><div></div><div><strong>Installed Packages</strong><ul><li><span>Deedle.Interactive, 3.0.0</span></li><li><span>FSharp.Data, 4.2.7</span></li><li><span>FSharp.Stats, 0.4.3</span></li><li><span>Plotly.NET.Interactive, 4.0.0</span></li></ul></div></div>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Loading extensions from `C:\Users\schne\.nuget\packages\plotly.net.interactive\4.0.0\interactive-extensions\dotnet\Plotly.NET.Interactive.dll`</pre>
</div>
</div>
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Loading extensions from `C:\Users\schne\.nuget\packages\deedle.interactive\3.0.0\interactive-extensions\dotnet\Deedle.Interactive.dll`</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Loading-data">Loading data<a class="anchor-link" href="#Loading-data">¶</a></h2>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [3]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-F#"><pre><span></span><span class="k">open</span><span class="w"> </span><span class="nn">FSharp.Data</span>
<span class="k">open</span><span class="w"> </span><span class="nn">Deedle</span>

<span class="c1">// Retrieve data using the FSharp.Data package and read it as dataframe using the Deedle package</span>
<span class="k">let</span><span class="w"> </span><span class="nv">rawData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">Http</span><span class="p">.</span><span class="n">RequestString</span><span class="w"> </span><span class="s">@"https://raw.githubusercontent.com/fslaborg/datasets/main/data/iris.csv"</span>
<span class="k">let</span><span class="w"> </span><span class="nv">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">Frame</span><span class="p">.</span><span class="n">ReadCsvString</span><span class="o">(</span><span class="n">rawData</span><span class="o">)</span>

<span class="n">df</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div>
<style scoped="">,
  .dataframe tbody tr th:only-of-type {
    vertical-align: middle;
  }
  .dataframe tbody tr th {,
    vertical-align: top
  }
  .dataframe thead th {
    text-align: right;
  }
  .no-wrap {
    white-space: nowrap;
  }
</style>
<table border="1" class="dataframe">
<thead><th></th><th></th><th>sepal_length</th><th>sepal_width</th><th>petal_length</th><th>petal_width</th><th>species</th></thead><thead><th></th><th></th><th>(Decimal)</th><th>(Decimal)</th><th>(Decimal)</th><th>(Decimal)</th><th>(string)</th></thead>
<tr><td><b>0</b></td><td class="no-wrap">-&gt;</td><td>5.5</td><td>2.4</td><td>3.8</td><td>1.1</td><td>versicolor</td></tr><tr><td><b>1</b></td><td class="no-wrap">-&gt;</td><td>4.9</td><td>3.1</td><td>1.5</td><td>0.1</td><td>setosa</td></tr><tr><td><b>2</b></td><td class="no-wrap">-&gt;</td><td>7.6</td><td>3</td><td>6.6</td><td>2.1</td><td>virginica</td></tr><tr><td><b>3</b></td><td class="no-wrap">-&gt;</td><td>5.6</td><td>2.8</td><td>4.9</td><td>2</td><td>virginica</td></tr><tr><td><b>4</b></td><td class="no-wrap">-&gt;</td><td>6.1</td><td>3</td><td>4.9</td><td>1.8</td><td>virginica</td></tr><tr><td><b>:</b></td><td class="no-wrap"></td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr><tr><td><b>145</b></td><td class="no-wrap">-&gt;</td><td>7.7</td><td>2.6</td><td>6.9</td><td>2.3</td><td>virginica</td></tr><tr><td><b>146</b></td><td class="no-wrap">-&gt;</td><td>5.7</td><td>2.6</td><td>3.5</td><td>1</td><td>versicolor</td></tr><tr><td><b>147</b></td><td class="no-wrap">-&gt;</td><td>5.9</td><td>3</td><td>5.1</td><td>1.8</td><td>virginica</td></tr><tr><td><b>148</b></td><td class="no-wrap">-&gt;</td><td>6.8</td><td>3.2</td><td>5.9</td><td>2.3</td><td>virginica</td></tr><tr><td><b>149</b></td><td class="no-wrap">-&gt;</td><td>5</td><td>3.6</td><td>1.4</td><td>0.2</td><td>setosa</td></tr>
</table>
<p><b>150</b> rows x <b>5</b> columns</p><p><b>0</b> missing values</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Let's take a first look at the data with heatmaps using Plotly.NET. Each of the 150 records consists of four measurements and a species identifier.
Since the species identifier occur several times (Iris-virginica, Iris-versicolor, and Iris-setosa), we create unique labels by adding the rows index to the species identifier.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [4]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-F#"><pre><span></span><span class="k">open</span><span class="w"> </span><span class="nn">Plotly.NET</span>

<span class="k">let</span><span class="w"> </span><span class="nv">colNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s">"sepal_length"</span><span class="o">;</span><span class="s">"sepal_width"</span><span class="o">;</span><span class="s">"petal_length"</span><span class="o">;</span><span class="s">"petal_width"</span><span class="o">]</span>

<span class="c1">// isolate data as float [] []</span>
<span class="k">let</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="nn">Frame</span><span class="p">.</span><span class="n">dropCol</span><span class="w"> </span><span class="s">"species"</span><span class="w"> </span><span class="n">df</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Frame</span><span class="p">.</span><span class="n">toJaggedArray</span>
<span class="w">    </span>

<span class="c1">// isolate labels as seq&lt;string&gt;</span>
<span class="k">let</span><span class="w"> </span><span class="nv">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="nn">Frame</span><span class="p">.</span><span class="n">getCol</span><span class="w"> </span><span class="s">"species"</span><span class="w"> </span><span class="n">df</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Series</span><span class="p">.</span><span class="n">values</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Seq</span><span class="p">.</span><span class="n">mapi</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sprintf</span><span class="w"> </span><span class="s">"%s_%i"</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">i</span><span class="o">)</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Array</span><span class="p">.</span><span class="n">ofSeq</span>


<span class="nn">Chart</span><span class="p">.</span><span class="n">Heatmap</span><span class="o">(</span><span class="n">data</span><span class="o">,</span><span class="n">colNames</span><span class="o">=</span><span class="n">colNames</span><span class="o">,</span><span class="n">rowNames</span><span class="o">=</span><span class="n">labels</span><span class="o">)</span>
<span class="c1">// required to fit the species identifier on the left side of the heatmap</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nn">Chart</span><span class="p">.</span><span class="n">withMarginSize</span><span class="o">(</span><span class="n">Left</span><span class="o">=</span><span class="mi">100</span><span class="o">.)</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nn">Chart</span><span class="p">.</span><span class="n">withTitle</span><span class="w"> </span><span class="s">"raw iris data"</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div><div id="6a166de9-84c9-4fc9-8739-3090f0a2bfee"><!-- Plotly chart will be drawn inside this DIV --></div><script type="text/javascript">
var renderPlotly_6a166de984c94fc987393090f0a2bfee = function() {
    var fsharpPlotlyRequire = requirejs.config({context:'fsharp-plotly',paths:{plotly:'https://cdn.plot.ly/plotly-2.18.1.min'}}) || require;
    fsharpPlotlyRequire(['plotly'], function(Plotly) {
        var data = [{"type":"heatmap","x":["sepal_length","sepal_width","petal_length","petal_width"],"y":["versicolor_0","setosa_1","virginica_2","virginica_3","virginica_4","virginica_5","virginica_6","virginica_7","virginica_8","setosa_9","setosa_10","versicolor_11","versicolor_12","setosa_13","virginica_14","virginica_15","setosa_16","setosa_17","setosa_18","virginica_19","versicolor_20","setosa_21","virginica_22","setosa_23","virginica_24","virginica_25","versicolor_26","versicolor_27","setosa_28","virginica_29","virginica_30","virginica_31","setosa_32","setosa_33","versicolor_34","setosa_35","setosa_36","versicolor_37","versicolor_38","versicolor_39","versicolor_40","versicolor_41","setosa_42","virginica_43","versicolor_44","versicolor_45","virginica_46","setosa_47","virginica_48","setosa_49","virginica_50","setosa_51","versicolor_52","virginica_53","virginica_54","setosa_55","versicolor_56","setosa_57","setosa_58","virginica_59","setosa_60","setosa_61","virginica_62","setosa_63","virginica_64","setosa_65","versicolor_66","versicolor_67","versicolor_68","versicolor_69","virginica_70","setosa_71","virginica_72","virginica_73","setosa_74","setosa_75","versicolor_76","versicolor_77","versicolor_78","versicolor_79","versicolor_80","virginica_81","versicolor_82","setosa_83","setosa_84","setosa_85","versicolor_86","setosa_87","versicolor_88","versicolor_89","versicolor_90","versicolor_91","versicolor_92","versicolor_93","setosa_94","setosa_95","virginica_96","setosa_97","versicolor_98","setosa_99","versicolor_100","virginica_101","setosa_102","setosa_103","virginica_104","versicolor_105","setosa_106","versicolor_107","virginica_108","versicolor_109","versicolor_110","virginica_111","virginica_112","virginica_113","versicolor_114","virginica_115","virginica_116","setosa_117","versicolor_118","setosa_119","versicolor_120","setosa_121","setosa_122","virginica_123","setosa_124","setosa_125","setosa_126","virginica_127","versicolor_128","virginica_129","virginica_130","setosa_131","virginica_132","versicolor_133","setosa_134","virginica_135","versicolor_136","virginica_137","versicolor_138","versicolor_139","versicolor_140","virginica_141","versicolor_142","virginica_143","setosa_144","virginica_145","versicolor_146","virginica_147","virginica_148","setosa_149"],"z":[[5.5,2.4,3.8,1.1],[4.9,3.1,1.5,0.1],[7.6,3.0,6.6,2.1],[5.6,2.8,4.9,2.0],[6.1,3.0,4.9,1.8],[6.3,3.4,5.6,2.4],[6.2,2.8,4.8,1.8],[7.2,3.2,6.0,1.8],[6.9,3.2,5.7,2.3],[4.9,3.0,1.4,0.2],[5.4,3.9,1.7,0.4],[7.0,3.2,4.7,1.4],[6.1,3.0,4.6,1.4],[5.4,3.7,1.5,0.2],[7.2,3.6,6.1,2.5],[6.3,2.8,5.1,1.5],[5.4,3.4,1.7,0.2],[5.8,4.0,1.2,0.2],[5.0,3.2,1.2,0.2],[6.5,3.0,5.8,2.2],[5.6,3.0,4.1,1.3],[4.3,3.0,1.1,0.1],[6.7,3.3,5.7,2.5],[4.5,2.3,1.3,0.3],[5.7,2.5,5.0,2.0],[6.3,2.7,4.9,1.8],[5.6,3.0,4.5,1.5],[5.6,2.5,3.9,1.1],[4.9,3.1,1.5,0.1],[7.7,3.0,6.1,2.3],[6.3,2.5,5.0,1.9],[6.4,3.1,5.5,1.8],[4.7,3.2,1.6,0.2],[5.5,4.2,1.4,0.2],[5.9,3.2,4.8,1.8],[5.0,3.4,1.6,0.4],[5.4,3.4,1.5,0.4],[6.0,2.7,5.1,1.6],[5.6,2.9,3.6,1.3],[6.3,3.3,4.7,1.6],[5.1,2.5,3.0,1.1],[6.4,3.2,4.5,1.5],[5.1,3.7,1.5,0.4],[6.7,3.0,5.2,2.3],[6.2,2.9,4.3,1.3],[6.8,2.8,4.8,1.4],[7.7,2.8,6.7,2.0],[4.8,3.0,1.4,0.1],[6.2,3.4,5.4,2.3],[4.8,3.4,1.9,0.2],[6.7,2.5,5.8,1.8],[5.1,3.5,1.4,0.2],[6.7,3.0,5.0,1.7],[6.9,3.1,5.1,2.3],[5.8,2.7,5.1,1.9],[4.8,3.1,1.6,0.2],[5.5,2.6,4.4,1.2],[5.1,3.8,1.6,0.2],[5.7,4.4,1.5,0.4],[6.7,3.3,5.7,2.1],[4.4,3.0,1.3,0.2],[5.0,3.5,1.3,0.3],[6.9,3.1,5.4,2.1],[5.0,3.5,1.6,0.6],[6.5,3.2,5.1,2.0],[4.6,3.6,1.0,0.2],[6.1,2.8,4.7,1.2],[5.0,2.0,3.5,1.0],[5.8,2.7,4.1,1.0],[6.0,3.4,4.5,1.6],[4.9,2.5,4.5,1.7],[5.7,3.8,1.7,0.3],[7.9,3.8,6.4,2.0],[7.2,3.0,5.8,1.6],[5.5,3.5,1.3,0.2],[4.6,3.2,1.4,0.2],[6.4,2.9,4.3,1.3],[6.9,3.1,4.9,1.5],[6.0,2.9,4.5,1.5],[5.8,2.6,4.0,1.2],[5.2,2.7,3.9,1.4],[7.4,2.8,6.1,1.9],[5.5,2.4,3.7,1.0],[5.1,3.4,1.5,0.2],[4.8,3.4,1.6,0.2],[5.0,3.0,1.6,0.2],[5.7,2.8,4.1,1.3],[4.6,3.1,1.5,0.2],[5.9,3.0,4.2,1.5],[6.1,2.8,4.0,1.3],[5.7,2.8,4.5,1.3],[6.0,2.2,4.0,1.0],[5.4,3.0,4.5,1.5],[6.1,2.9,4.7,1.4],[5.4,3.9,1.3,0.4],[5.2,4.1,1.5,0.1],[7.3,2.9,6.3,1.8],[4.7,3.2,1.3,0.2],[6.3,2.5,4.9,1.5],[5.3,3.7,1.5,0.2],[6.6,2.9,4.6,1.3],[6.3,2.9,5.6,1.8],[4.4,3.2,1.3,0.2],[4.4,2.9,1.4,0.2],[6.5,3.0,5.5,1.8],[6.3,2.3,4.4,1.3],[4.9,3.1,1.5,0.1],[6.6,3.0,4.4,1.4],[6.4,2.8,5.6,2.1],[6.5,2.8,4.6,1.5],[5.5,2.3,4.0,1.3],[6.7,3.1,5.6,2.4],[6.4,3.2,5.3,2.3],[6.8,3.0,5.5,2.1],[5.7,2.9,4.2,1.3],[5.8,2.7,5.1,1.9],[6.0,3.0,4.8,1.8],[5.2,3.4,1.4,0.2],[6.7,3.1,4.7,1.5],[5.1,3.5,1.4,0.3],[5.5,2.5,4.0,1.3],[4.8,3.0,1.4,0.3],[5.1,3.8,1.5,0.3],[6.4,2.8,5.6,2.2],[5.0,3.4,1.5,0.2],[5.1,3.8,1.9,0.4],[5.1,3.3,1.7,0.5],[6.5,3.0,5.2,2.0],[5.6,2.7,4.2,1.3],[6.0,2.2,5.0,1.5],[7.1,3.0,5.9,2.1],[4.6,3.4,1.4,0.3],[6.1,2.6,5.6,1.4],[6.2,2.2,4.5,1.5],[5.2,3.5,1.5,0.2],[7.7,3.8,6.7,2.2],[5.7,3.0,4.2,1.2],[6.4,2.7,5.3,1.9],[5.8,2.7,3.9,1.2],[5.0,2.3,3.3,1.0],[6.7,3.1,4.4,1.4],[6.3,3.3,6.0,2.5],[4.9,2.4,3.3,1.0],[5.8,2.8,5.1,2.4],[5.0,3.3,1.4,0.2],[7.7,2.6,6.9,2.3],[5.7,2.6,3.5,1.0],[5.9,3.0,5.1,1.8],[6.8,3.2,5.9,2.3],[5.0,3.6,1.4,0.2]]}];
        var layout = {"width":600,"height":600,"template":{"layout":{"title":{"x":0.05},"font":{"color":"rgba(42, 63, 95, 1.0)"},"paper_bgcolor":"rgba(255, 255, 255, 1.0)","plot_bgcolor":"rgba(229, 236, 246, 1.0)","autotypenumbers":"strict","colorscale":{"diverging":[[0.0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1.0,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"hovermode":"closest","hoverlabel":{"align":"left"},"coloraxis":{"colorbar":{"outlinewidth":0.0,"ticks":""}},"geo":{"showland":true,"landcolor":"rgba(229, 236, 246, 1.0)","showlakes":true,"lakecolor":"rgba(255, 255, 255, 1.0)","subunitcolor":"rgba(255, 255, 255, 1.0)","bgcolor":"rgba(255, 255, 255, 1.0)"},"mapbox":{"style":"light"},"polar":{"bgcolor":"rgba(229, 236, 246, 1.0)","radialaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","ticks":""},"angularaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","ticks":""}},"scene":{"xaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true},"yaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true},"zaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true}},"ternary":{"aaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"baxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"caxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"bgcolor":"rgba(229, 236, 246, 1.0)"},"xaxis":{"title":{"standoff":15},"ticks":"","automargin":"height+width+left+right+top+bottom","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","zerolinecolor":"rgba(255, 255, 255, 1.0)","zerolinewidth":2.0},"yaxis":{"title":{"standoff":15},"ticks":"","automargin":"height+width+left+right+top+bottom","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","zerolinecolor":"rgba(255, 255, 255, 1.0)","zerolinewidth":2.0},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"shapedefaults":{"line":{"color":"rgba(42, 63, 95, 1.0)"}},"colorway":["rgba(99, 110, 250, 1.0)","rgba(239, 85, 59, 1.0)","rgba(0, 204, 150, 1.0)","rgba(171, 99, 250, 1.0)","rgba(255, 161, 90, 1.0)","rgba(25, 211, 243, 1.0)","rgba(255, 102, 146, 1.0)","rgba(182, 232, 128, 1.0)","rgba(255, 151, 255, 1.0)","rgba(254, 203, 82, 1.0)"]},"data":{"bar":[{"marker":{"line":{"color":"rgba(229, 236, 246, 1.0)","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"error_x":{"color":"rgba(42, 63, 95, 1.0)"},"error_y":{"color":"rgba(42, 63, 95, 1.0)"}}],"barpolar":[{"marker":{"line":{"color":"rgba(229, 236, 246, 1.0)","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}}}],"carpet":[{"aaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","endlinecolor":"rgba(42, 63, 95, 1.0)","minorgridcolor":"rgba(255, 255, 255, 1.0)","startlinecolor":"rgba(42, 63, 95, 1.0)"},"baxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","endlinecolor":"rgba(42, 63, 95, 1.0)","minorgridcolor":"rgba(255, 255, 255, 1.0)","startlinecolor":"rgba(42, 63, 95, 1.0)"}}],"choropleth":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contour":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"colorbar":{"outlinewidth":0.0,"ticks":""}}],"heatmap":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}}}],"histogram2d":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"colorbar":{"outlinewidth":0.0,"ticks":""}}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"pie":[{"automargin":true}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatter3d":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}},"line":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"surface":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"table":[{"cells":{"fill":{"color":"rgba(235, 240, 248, 1.0)"},"line":{"color":"rgba(255, 255, 255, 1.0)"}},"header":{"fill":{"color":"rgba(200, 212, 227, 1.0)"},"line":{"color":"rgba(255, 255, 255, 1.0)"}}}]}},"margin":{"l":100.0},"title":{"text":"raw iris data"}};
        var config = {"responsive":true};
        Plotly.newPlot('6a166de9-84c9-4fc9-8739-3090f0a2bfee', data, layout, config);
    });
};
if ((typeof(requirejs) !==  typeof(Function)) || (typeof(requirejs.config) !== typeof(Function))) {
    var script = document.createElement("script");
    script.setAttribute("src", "https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js");
    script.onload = function(){
        renderPlotly_6a166de984c94fc987393090f0a2bfee();
    };
    document.getElementsByTagName("head")[0].appendChild(script);
}
else {
    renderPlotly_6a166de984c94fc987393090f0a2bfee();
}
</script></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Clustering">Clustering<a class="anchor-link" href="#Clustering">¶</a></h2><p>The function that performs hierarchical clustering can be found at <code>FSharp.Stats.ML.Unsupervised.HierarchicalClustering.generate</code>. It requires three input parameters:</p>
<ol>
<li>Distance measure working on <code>'T</code> (from <code>FSharp.Stats.ML.DistanceMetrics</code>)</li>
<li>Linkage type</li>
<li>Data to cluster as <code>'T</code></li>
</ol>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [5]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-F#"><pre><span></span><span class="k">open</span><span class="w"> </span><span class="nn">FSharp.Stats.ML</span>
<span class="k">open</span><span class="w"> </span><span class="nn">FSharp.Stats.ML.Unsupervised</span>

<span class="k">let</span><span class="w"> </span><span class="nv">distanceMeasure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">DistanceMetrics</span><span class="p">.</span><span class="n">euclideanNaNSquared</span>

<span class="k">let</span><span class="w"> </span><span class="nv">linker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">HierarchicalClustering</span><span class="p">.</span><span class="nn">Linker</span><span class="p">.</span><span class="n">centroidLwLinker</span>

<span class="c1">// calculates the clustering and reports a single root cluster (node), </span>
<span class="c1">// that may recursively contains further nodes</span>
<span class="k">let</span><span class="w"> </span><span class="nv">clusterResultH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="nn">HierarchicalClustering</span><span class="p">.</span><span class="n">generate</span><span class="w"> </span><span class="n">distanceMeasure</span><span class="w"> </span><span class="n">linker</span><span class="w"> </span><span class="n">data</span>

<span class="c1">// If a desired cluster number is specified, the following function cuts the cluster according</span>
<span class="c1">// to the depth, that results in the respective number of clusters (here 3). Only leaves are reported.</span>
<span class="k">let</span><span class="w"> </span><span class="nv">threeClusters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">HierarchicalClustering</span><span class="p">.</span><span class="n">cutHClust</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">clusterResultH</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Every cluster leaf contains its raw values and an index that indicates the position of the respective data
point in the raw data. The index can be retrieved from leaves using HierarchicalClustering.getClusterId.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [6]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-F#"><pre><span></span><span class="c1">// Detailed information for 3 clusters are given</span>
<span class="k">let</span><span class="w"> </span><span class="nv">inspectThreeClusters</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">threeClusters</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">List</span><span class="p">.</span><span class="n">map</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
<span class="w">        </span><span class="n">cluster</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">List</span><span class="p">.</span><span class="n">map</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">leaf</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
<span class="w">            </span><span class="n">labels</span><span class="o">.[</span><span class="nn">HierarchicalClustering</span><span class="p">.</span><span class="n">getClusterId</span><span class="w"> </span><span class="n">leaf</span><span class="o">]</span>
<span class="w">            </span><span class="o">)</span>
<span class="w">        </span><span class="o">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [7]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-F#"><pre><span></span><span class="n">inspectThreeClusters</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nn">List</span><span class="p">.</span><span class="n">mapi</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="nv">truncCluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">.[</span><span class="mi">0</span><span class="o">..</span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">String</span><span class="p">.</span><span class="n">concat</span><span class="w"> </span><span class="s">"; "</span><span class="w"> </span>
<span class="w">    </span><span class="n">sprintf</span><span class="w"> </span><span class="s">"Cluster%i: [%s ...]"</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">truncCluster</span><span class="w"> </span>
<span class="w">    </span><span class="o">)</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nn">String</span><span class="p">.</span><span class="n">concat</span><span class="w"> </span><span class="s">"</span><span class="se">\n</span><span class="s">"</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
<pre>Cluster0: [versicolor_44; versicolor_76; versicolor_89; versicolor_12; versicolor_93 ...]
Cluster1: [setosa_16; setosa_36; setosa_74; setosa_42; setosa_122 ...]
Cluster2: [virginica_72; virginica_135; virginica_14; virginica_7; virginica_73 ...]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>To break up the tree structure but maintain the clustering order, the cluster tree has to be flattened.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [8]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-F#"><pre><span></span><span class="c1">// To recursevely flatten the cluster tree into leaves only, use flattenHClust.</span>
<span class="c1">// A leaf list is reported, that does not contain any cluster membership, </span>
<span class="c1">// but is sorted by the clustering result.</span>
<span class="k">let</span><span class="w"> </span><span class="nv">hLeaves</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="n">clusterResultH</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">HierarchicalClustering</span><span class="p">.</span><span class="n">flattenHClust</span>
<span class="w">    </span>
<span class="c1">// Takes the sorted cluster result and reports a tuple of label and data value.</span>
<span class="k">let</span><span class="w"> </span><span class="nv">dataSortedByClustering</span><span class="w"> </span><span class="o">=</span><span class="w">    </span>
<span class="w">    </span><span class="n">hLeaves</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Seq</span><span class="p">.</span><span class="n">choose</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">label</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">labels</span><span class="o">.[</span><span class="nn">HierarchicalClustering</span><span class="p">.</span><span class="n">getClusterId</span><span class="w"> </span><span class="n">c</span><span class="o">]</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">HierarchicalClustering</span><span class="p">.</span><span class="n">tryGetLeafValue</span><span class="w"> </span><span class="n">c</span>
<span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="k">with</span>
<span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span>
<span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">Some</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Some</span><span class="w"> </span><span class="o">(</span><span class="n">label</span><span class="o">,</span><span class="n">x</span><span class="o">)</span>
<span class="w">        </span><span class="o">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The visualization again is performed using a Plotly.NET heatmap.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In [9]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-F#"><pre><span></span><span class="k">open</span><span class="w"> </span><span class="nn">FSharpAux</span>

<span class="k">let</span><span class="w"> </span><span class="o">(</span><span class="n">hlable</span><span class="o">,</span><span class="n">hdata</span><span class="o">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">dataSortedByClustering</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Seq</span><span class="p">.</span><span class="n">unzip</span>
<span class="nn">Chart</span><span class="p">.</span><span class="n">Heatmap</span><span class="o">(</span><span class="n">hdata</span><span class="o">,</span><span class="n">colNames</span><span class="o">=</span><span class="n">colNames</span><span class="o">,</span><span class="n">rowNames</span><span class="o">=</span><span class="n">hlable</span><span class="o">)</span>
<span class="c1">// required to fit the species identifier on the left side of the heatmap</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nn">Chart</span><span class="p">.</span><span class="n">withMarginSize</span><span class="o">(</span><span class="n">Left</span><span class="o">=</span><span class="mi">100</span><span class="o">.)</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nn">Chart</span><span class="p">.</span><span class="n">withTitle</span><span class="w"> </span><span class="s">"Clustered iris data (hierarchical clustering)"</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html" tabindex="0">
<div><div id="450421ca-724d-48a2-8693-18b276efcd81"><!-- Plotly chart will be drawn inside this DIV --></div><script type="text/javascript">
var renderPlotly_450421ca724d48a2869318b276efcd81 = function() {
    var fsharpPlotlyRequire = requirejs.config({context:'fsharp-plotly',paths:{plotly:'https://cdn.plot.ly/plotly-2.18.1.min'}}) || require;
    fsharpPlotlyRequire(['plotly'], function(Plotly) {
        var data = [{"type":"heatmap","x":["sepal_length","sepal_width","petal_length","petal_width"],"y":["versicolor_44","versicolor_76","versicolor_89","versicolor_12","versicolor_93","versicolor_78","versicolor_66","versicolor_39","versicolor_41","versicolor_69","versicolor_11","versicolor_77","versicolor_118","versicolor_45","versicolor_52","versicolor_100","versicolor_109","versicolor_107","versicolor_140","virginica_15","versicolor_37","versicolor_98","virginica_6","virginica_25","virginica_30","virginica_4","virginica_116","versicolor_34","virginica_147","virginica_54","virginica_115","virginica_24","virginica_3","virginica_143","versicolor_105","versicolor_133","virginica_129","versicolor_38","versicolor_146","versicolor_0","versicolor_82","versicolor_27","versicolor_110","versicolor_120","versicolor_80","versicolor_79","versicolor_138","versicolor_68","versicolor_86","versicolor_128","versicolor_114","versicolor_136","versicolor_20","versicolor_56","versicolor_90","versicolor_88","versicolor_26","versicolor_92","versicolor_91","virginica_70","versicolor_139","versicolor_142","versicolor_40","versicolor_67","virginica_72","virginica_135","virginica_14","virginica_7","virginica_73","virginica_130","virginica_81","virginica_96","virginica_29","virginica_2","virginica_46","virginica_145","virginica_50","virginica_132","virginica_43","virginica_53","virginica_62","virginica_113","virginica_64","virginica_127","virginica_31","virginica_104","virginica_101","virginica_137","virginica_108","virginica_123","virginica_19","virginica_22","virginica_111","virginica_8","virginica_148","virginica_59","virginica_5","virginica_48","virginica_112","virginica_141","setosa_16","setosa_36","setosa_74","setosa_42","setosa_122","setosa_57","setosa_13","setosa_99","setosa_61","setosa_149","setosa_117","setosa_134","setosa_51","setosa_119","setosa_83","setosa_124","setosa_144","setosa_35","setosa_126","setosa_63","setosa_125","setosa_75","setosa_87","setosa_97","setosa_131","setosa_9","setosa_121","setosa_47","setosa_1","setosa_28","setosa_106","setosa_85","setosa_32","setosa_55","setosa_18","setosa_49","setosa_84","setosa_60","setosa_103","setosa_102","setosa_21","setosa_65","setosa_33","setosa_95","setosa_94","setosa_10","setosa_71","setosa_17","setosa_58","setosa_23"],"z":[[6.2,2.9,4.3,1.3],[6.4,2.9,4.3,1.3],[6.1,2.8,4.0,1.3],[6.1,3.0,4.6,1.4],[6.1,2.9,4.7,1.4],[6.0,2.9,4.5,1.5],[6.1,2.8,4.7,1.2],[6.3,3.3,4.7,1.6],[6.4,3.2,4.5,1.5],[6.0,3.4,4.5,1.6],[7.0,3.2,4.7,1.4],[6.9,3.1,4.9,1.5],[6.7,3.1,4.7,1.5],[6.8,2.8,4.8,1.4],[6.7,3.0,5.0,1.7],[6.6,2.9,4.6,1.3],[6.5,2.8,4.6,1.5],[6.6,3.0,4.4,1.4],[6.7,3.1,4.4,1.4],[6.3,2.8,5.1,1.5],[6.0,2.7,5.1,1.6],[6.3,2.5,4.9,1.5],[6.2,2.8,4.8,1.8],[6.3,2.7,4.9,1.8],[6.3,2.5,5.0,1.9],[6.1,3.0,4.9,1.8],[6.0,3.0,4.8,1.8],[5.9,3.2,4.8,1.8],[5.9,3.0,5.1,1.8],[5.8,2.7,5.1,1.9],[5.8,2.7,5.1,1.9],[5.7,2.5,5.0,2.0],[5.6,2.8,4.9,2.0],[5.8,2.8,5.1,2.4],[6.3,2.3,4.4,1.3],[6.2,2.2,4.5,1.5],[6.0,2.2,5.0,1.5],[5.6,2.9,3.6,1.3],[5.7,2.6,3.5,1.0],[5.5,2.4,3.8,1.1],[5.5,2.4,3.7,1.0],[5.6,2.5,3.9,1.1],[5.5,2.3,4.0,1.3],[5.5,2.5,4.0,1.3],[5.2,2.7,3.9,1.4],[5.8,2.6,4.0,1.2],[5.8,2.7,3.9,1.2],[5.8,2.7,4.1,1.0],[5.7,2.8,4.1,1.3],[5.6,2.7,4.2,1.3],[5.7,2.9,4.2,1.3],[5.7,3.0,4.2,1.2],[5.6,3.0,4.1,1.3],[5.5,2.6,4.4,1.2],[5.7,2.8,4.5,1.3],[5.9,3.0,4.2,1.5],[5.6,3.0,4.5,1.5],[5.4,3.0,4.5,1.5],[6.0,2.2,4.0,1.0],[4.9,2.5,4.5,1.7],[5.0,2.3,3.3,1.0],[4.9,2.4,3.3,1.0],[5.1,2.5,3.0,1.1],[5.0,2.0,3.5,1.0],[7.9,3.8,6.4,2.0],[7.7,3.8,6.7,2.2],[7.2,3.6,6.1,2.5],[7.2,3.2,6.0,1.8],[7.2,3.0,5.8,1.6],[7.1,3.0,5.9,2.1],[7.4,2.8,6.1,1.9],[7.3,2.9,6.3,1.8],[7.7,3.0,6.1,2.3],[7.6,3.0,6.6,2.1],[7.7,2.8,6.7,2.0],[7.7,2.6,6.9,2.3],[6.7,2.5,5.8,1.8],[6.1,2.6,5.6,1.4],[6.7,3.0,5.2,2.3],[6.9,3.1,5.1,2.3],[6.9,3.1,5.4,2.1],[6.8,3.0,5.5,2.1],[6.5,3.2,5.1,2.0],[6.5,3.0,5.2,2.0],[6.4,3.1,5.5,1.8],[6.5,3.0,5.5,1.8],[6.3,2.9,5.6,1.8],[6.4,2.7,5.3,1.9],[6.4,2.8,5.6,2.1],[6.4,2.8,5.6,2.2],[6.5,3.0,5.8,2.2],[6.7,3.3,5.7,2.5],[6.7,3.1,5.6,2.4],[6.9,3.2,5.7,2.3],[6.8,3.2,5.9,2.3],[6.7,3.3,5.7,2.1],[6.3,3.4,5.6,2.4],[6.2,3.4,5.4,2.3],[6.4,3.2,5.3,2.3],[6.3,3.3,6.0,2.5],[5.4,3.4,1.7,0.2],[5.4,3.4,1.5,0.4],[5.5,3.5,1.3,0.2],[5.1,3.7,1.5,0.4],[5.1,3.8,1.5,0.3],[5.1,3.8,1.6,0.2],[5.4,3.7,1.5,0.2],[5.3,3.7,1.5,0.2],[5.0,3.5,1.3,0.3],[5.0,3.6,1.4,0.2],[5.2,3.4,1.4,0.2],[5.2,3.5,1.5,0.2],[5.1,3.5,1.4,0.2],[5.1,3.5,1.4,0.3],[5.1,3.4,1.5,0.2],[5.0,3.4,1.5,0.2],[5.0,3.3,1.4,0.2],[5.0,3.4,1.6,0.4],[5.1,3.3,1.7,0.5],[5.0,3.5,1.6,0.6],[5.1,3.8,1.9,0.4],[4.6,3.2,1.4,0.2],[4.6,3.1,1.5,0.2],[4.7,3.2,1.3,0.2],[4.6,3.4,1.4,0.3],[4.9,3.0,1.4,0.2],[4.8,3.0,1.4,0.3],[4.8,3.0,1.4,0.1],[4.9,3.1,1.5,0.1],[4.9,3.1,1.5,0.1],[4.9,3.1,1.5,0.1],[5.0,3.0,1.6,0.2],[4.7,3.2,1.6,0.2],[4.8,3.1,1.6,0.2],[5.0,3.2,1.2,0.2],[4.8,3.4,1.9,0.2],[4.8,3.4,1.6,0.2],[4.4,3.0,1.3,0.2],[4.4,2.9,1.4,0.2],[4.4,3.2,1.3,0.2],[4.3,3.0,1.1,0.1],[4.6,3.6,1.0,0.2],[5.5,4.2,1.4,0.2],[5.2,4.1,1.5,0.1],[5.4,3.9,1.3,0.4],[5.4,3.9,1.7,0.4],[5.7,3.8,1.7,0.3],[5.8,4.0,1.2,0.2],[5.7,4.4,1.5,0.4],[4.5,2.3,1.3,0.3]]}];
        var layout = {"width":600,"height":600,"template":{"layout":{"title":{"x":0.05},"font":{"color":"rgba(42, 63, 95, 1.0)"},"paper_bgcolor":"rgba(255, 255, 255, 1.0)","plot_bgcolor":"rgba(229, 236, 246, 1.0)","autotypenumbers":"strict","colorscale":{"diverging":[[0.0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1.0,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"hovermode":"closest","hoverlabel":{"align":"left"},"coloraxis":{"colorbar":{"outlinewidth":0.0,"ticks":""}},"geo":{"showland":true,"landcolor":"rgba(229, 236, 246, 1.0)","showlakes":true,"lakecolor":"rgba(255, 255, 255, 1.0)","subunitcolor":"rgba(255, 255, 255, 1.0)","bgcolor":"rgba(255, 255, 255, 1.0)"},"mapbox":{"style":"light"},"polar":{"bgcolor":"rgba(229, 236, 246, 1.0)","radialaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","ticks":""},"angularaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","ticks":""}},"scene":{"xaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true},"yaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true},"zaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","gridwidth":2.0,"zerolinecolor":"rgba(255, 255, 255, 1.0)","backgroundcolor":"rgba(229, 236, 246, 1.0)","showbackground":true}},"ternary":{"aaxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"baxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"caxis":{"ticks":"","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)"},"bgcolor":"rgba(229, 236, 246, 1.0)"},"xaxis":{"title":{"standoff":15},"ticks":"","automargin":"height+width+left+right+top+bottom","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","zerolinecolor":"rgba(255, 255, 255, 1.0)","zerolinewidth":2.0},"yaxis":{"title":{"standoff":15},"ticks":"","automargin":"height+width+left+right+top+bottom","linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","zerolinecolor":"rgba(255, 255, 255, 1.0)","zerolinewidth":2.0},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"shapedefaults":{"line":{"color":"rgba(42, 63, 95, 1.0)"}},"colorway":["rgba(99, 110, 250, 1.0)","rgba(239, 85, 59, 1.0)","rgba(0, 204, 150, 1.0)","rgba(171, 99, 250, 1.0)","rgba(255, 161, 90, 1.0)","rgba(25, 211, 243, 1.0)","rgba(255, 102, 146, 1.0)","rgba(182, 232, 128, 1.0)","rgba(255, 151, 255, 1.0)","rgba(254, 203, 82, 1.0)"]},"data":{"bar":[{"marker":{"line":{"color":"rgba(229, 236, 246, 1.0)","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"error_x":{"color":"rgba(42, 63, 95, 1.0)"},"error_y":{"color":"rgba(42, 63, 95, 1.0)"}}],"barpolar":[{"marker":{"line":{"color":"rgba(229, 236, 246, 1.0)","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}}}],"carpet":[{"aaxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","endlinecolor":"rgba(42, 63, 95, 1.0)","minorgridcolor":"rgba(255, 255, 255, 1.0)","startlinecolor":"rgba(42, 63, 95, 1.0)"},"baxis":{"linecolor":"rgba(255, 255, 255, 1.0)","gridcolor":"rgba(255, 255, 255, 1.0)","endlinecolor":"rgba(42, 63, 95, 1.0)","minorgridcolor":"rgba(255, 255, 255, 1.0)","startlinecolor":"rgba(42, 63, 95, 1.0)"}}],"choropleth":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contour":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"colorbar":{"outlinewidth":0.0,"ticks":""}}],"heatmap":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}}}],"histogram2d":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"colorbar":{"outlinewidth":0.0,"ticks":""}}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"pie":[{"automargin":true}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatter3d":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}},"line":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0.0,"ticks":""}}}],"surface":[{"colorbar":{"outlinewidth":0.0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"table":[{"cells":{"fill":{"color":"rgba(235, 240, 248, 1.0)"},"line":{"color":"rgba(255, 255, 255, 1.0)"}},"header":{"fill":{"color":"rgba(200, 212, 227, 1.0)"},"line":{"color":"rgba(255, 255, 255, 1.0)"}}}]}},"margin":{"l":100.0},"title":{"text":"Clustered iris data (hierarchical clustering)"}};
        var config = {"responsive":true};
        Plotly.newPlot('450421ca-724d-48a2-8693-18b276efcd81', data, layout, config);
    });
};
if ((typeof(requirejs) !==  typeof(Function)) || (typeof(requirejs.config) !== typeof(Function))) {
    var script = document.createElement("script");
    script.setAttribute("src", "https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js");
    script.onload = function(){
        renderPlotly_450421ca724d48a2869318b276efcd81();
    };
    document.getElementsByTagName("head")[0].appendChild(script);
}
else {
    renderPlotly_450421ca724d48a2869318b276efcd81();
}
</script></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper" tabindex="0">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Limitations">Limitations<a class="anchor-link" href="#Limitations">¶</a></h2><ol>
<li>There is no strong guidance on which distance function and linkage type should be used. It often is chosen arbitrarily according to the user's experience.</li>
<li>The visual interpretation of the dendrogram is difficult, since swapping the direction of some bifurcations may totally disturbe the visual impression.</li>
</ol>
<h2 id="Notes">Notes<a class="anchor-link" href="#Notes">¶</a></h2><ul>
<li>Please note that depending on what data you want to cluster, a column wise z-score normalization may be required. In the presented example differences in sepal width have a reduced influence because
the absolute variation is low.</li>
</ul>
<h2 id="References">References<a class="anchor-link" href="#References">¶</a></h2><ul>
<li>Vijaya et al., A Review on Hierarchical Clustering Algorithms, Journal of Engineering and Applied Sciences, 2017</li>
<li>Rani and Rohil, A Study of Hierarchical Clustering Algorithm, International Journal of Information and Computation Technology, 2013</li>
<li>FSharp.Stats documentation, fslaborg, <a href="https://fslab.org/FSharp.Stats/Clustering.html">https://fslab.org/FSharp.Stats/Clustering.html</a></li>
</ul>
<h2 id="Further-reading">Further reading<a class="anchor-link" href="#Further-reading">¶</a></h2><p>Examples are taken from <a href="https://fslab.org/FSharp.Stats/Clustering.html">FSharp.Stats documentation</a> that covers various techniques for an optimal cluster number determination.</p>
<p>The next article in this series covers <a href="004_clustering_DBSCAN.html">DBSCAN using FSharp.Stats</a>.</p>
</div>
</div>
</div>
</div>
</main>

        </div>
        <footer class="footer has-bg-darkmagenta">
          <div class="container">
            <div class="columns">
              <div class="column is-4 m-4">
                <div class="block">
                  <h3 class="subtitle is-white">
                    FsLab - the project incubation space for data science in F#
                  </h3>
                </div>
                <div class="block">
                  <p>
                    FsLab is only possible due to the joined forces of F# open source contributors.
                  </p>
                </div>
                <div class="block">
                  <p>
                    This website is created and maintained by individual FsLab open source contributors.
                  </p>
                </div>
                <div class="block">
                  <div class="icon-text is-white">
                    <span class="icon">
                      <i class="fas fa-code-branch"></i>
                    </span>
                    <span>
                      <a class="footer-link" href="https://github.com/fslaborg/fslaborg.github.io">
                        website source code
                      </a>
                    </span>
                  </div>
                  <div class="icon-text is-white">
                    <span class="icon">
                      <i class="far fa-handshake"></i>
                    </span>
                    <span>
                      <a class="footer-link" href="https://github.com/orgs/fslaborg/people">
                        fslab contributors
                      </a>
                    </span>
                  </div>
                </div>
              </div>
              <div class="column is-4 m-4">
                <div class="block">
                  <h3 class="subtitle is-white">
                    More
                  </h3>
                </div>
                <div class="block">
                  <div class="block">
                    <div class="icon-text is-white">
                      <span class="icon">
                        <i class="fab fa-github"></i>
                      </span>
                      <span>
                        <a class="footer-link" href="https://github.com/fslaborg?type=source">
                          the fslab organisation on github
                        </a>
                      </span>
                    </div>
                    <div class="icon-text is-white">
                      <span class="icon">
                        <i class="fab fa-twitter"></i>
                      </span>
                      <span>
                        <a class="footer-link" href="https://twitter.com/fslaborg">
                          fslab on twitter
                        </a>
                      </span>
                    </div>
                  </div>
                  <div class="block">
                    <div class="icon-text is-white">
                      <span class="icon">
                        <i class="fas fa-cubes"></i>
                      </span>
                      <span>
                        <a class="footer-link" href="https://fslab.org/packages.html">
                          endorsed packages
                        </a>
                      </span>
                    </div>
                    <div class="icon-text is-white">
                      <span class="icon">
                        <i class="fas fa-plus"></i>
                      </span>
                      <span>
                        <a class="footer-link" href="https://github.com/fslaborg/fslaborg.github.io#add-a-project-to-the-packages-site">
                          add a package to the list
                        </a>
                      </span>
                    </div>
                  </div>
                  <div class="block">
                    <div class="icon-text is-white">
                      <span class="icon">
                        <i class="fas fa-graduation-cap"></i>
                      </span>
                      <span>
                        <a class="footer-link" href="https://fslab.org/tutorials.html">
                          tutorials and learning resources
                        </a>
                      </span>
                    </div>
                    <div class="icon-text is-white">
                      <span class="icon">
                        <i class="fas fa-plus"></i>
                      </span>
                      <span>
                        <a class="footer-link" href="https://github.com/fslaborg/fslaborg.github.io#add-a-tutorial-guide-or-blogpost">
                          add tutorial content
                        </a>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="column is-4 m-4">
                <div class="block">
                  <h3 class="subtitle is-white">
                    External resources
                  </h3>
                </div>
                <div class="block">
                  <ul>
                    <li>
                      <a href="https://github.com/fsprojects?type=source" class="footer-link">
                        fsprojects - general F# project incubation space
                      </a>
                    </li>
                    <li>
                      <a href="https://fsharp.org/" class="footer-link">
                        fsharp.org
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>
  </body>
</html>